{"version":3,"sources":["../src/index.ts","../src/routers/rom_router.ts","../node_modules/.pnpm/kolorist@1.8.0/node_modules/kolorist/src/index.ts","../src/utils/logger.ts","../src/utils/response.ts","../src/server.config.ts","../src/utils/query.ts","../src/services/roms_service.ts","../src/sequelize/models/categorys_model.ts","../src/sequelize/index.ts","../src/sequelize/models/roms_model.ts","../src/routers/categorys_router.ts","../src/services/categorys_service.ts","../src/routers/banner_router.ts","../src/sequelize/models/banner_model.ts","../src/services/banner_service.ts"],"sourcesContent":["import type { Request, Response, RequestHandler, NextFunction } from 'express'\r\nimport express from 'express'\r\nimport roms from './routers/rom_router'\r\nimport categorys from './routers/categorys_router'\r\nimport { port, getRomPath, hostIp, baseURL } from './server.config'\r\nimport * as logger from './utils/logger'\r\nimport banner from './routers/banner_router'\r\n\r\nconst setHeaders: RequestHandler = function (\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction\r\n) {\r\n    res.setHeader('Access-Control-Allow-Origin', '*') // 允许跨域\r\n    res.setHeader('Access-Control-Allow-Headers', '*') // 允许客户端设置请求头\r\n    res.setHeader('Access-Control-Allow-Methods', '*') // 允许客户端的请求方式\r\n    if (req.method === 'OPTIONS') {return res.sendStatus(200)} // options请求快速结束\r\n    next()\r\n}\r\nconst app = express()\r\n\r\napp.use(express.json())\r\n    // 请求头\r\n    .use(setHeaders)\r\n    // 静态资源\r\n    .use('/roms', express.static(getRomPath()))\r\n    // 路由\r\n    .use(categorys)\r\n    .use(roms)\r\n    .use(banner)\r\n\r\n// 开发模式下配置本地ip域名\r\nif (process.env.NODE_ENV === 'development') {\r\n    app.set('host', hostIp)\r\n}\r\n\r\napp.listen(port, () => {\r\n    logger.info(`server: ${baseURL}`)\r\n})\r\n","import { Router as router } from 'express'\r\nimport { dispatchResponse, sendEmpty } from '../utils/response'\r\n\r\nimport { checkQuery, resolveURL } from '../utils/query'\r\nimport { imgDir } from '../server.config'\r\nimport { getRandomList, getRomById, getRomlist, getSuggestions } from '../services/roms_service'\r\n\r\nconst roms = router()\r\n\r\n// 获取游戏ROM列表\r\n// /romlist?cat=xxx&keyword=xxx&page=xxx&limit=xxx\r\nroms.get('/romlist', async (req, res) => {\r\n    let { cat, keyword, page, limit } = req.query as Record<string, string>\r\n    cat ??= ''\r\n    keyword ??= ''\r\n    page ??= '1'\r\n    limit ??= '20'\r\n    await dispatchResponse(async () => {\r\n        const list = await getRomlist(cat, keyword, +page, +limit)\r\n        res.send({\r\n            code: 200, result: list.result, count: list.count,\r\n        })\r\n    }, res)\r\n})\r\n\r\n// 随机获取N个游戏\r\n// /random?n=xxx&cat=xxx&ignore=xxx\r\nroms.get('/random', async (req, res) => {\r\n    let { n, cat, ignore } = req.query as Record<string, string>\r\n    n ??= '8'\r\n    await dispatchResponse(async () => {\r\n        const result = await getRandomList(n, cat, ignore)\r\n        res.send({ code: 200, result })\r\n    }, res)\r\n})\r\n\r\n// 根据id获取单个ROM信息\r\n// /rom?id=xxx\r\nroms.get('/rom', async (req, res) => {\r\n    const id = req.query.id as string\r\n    if (!checkQuery(id)) {\r\n        sendEmpty(res, 'id')\r\n        return\r\n    }\r\n    await dispatchResponse(async () => {\r\n        const rom = await getRomById(id)\r\n        if (rom) {\r\n            res.send({\r\n                code: 200,\r\n                rom,\r\n            })\r\n        }\r\n        else {\r\n            res.send({ code: 400 })\r\n        }\r\n    }, res)\r\n})\r\n\r\n// 搜索建议\r\n// /suggestions?keyword=xxx\r\nroms.get('/suggestions', async (req, res) => {\r\n    const keyword = req.query.keyword as string\r\n    if (checkQuery(keyword)) {\r\n        await dispatchResponse(async () => {\r\n            const result = await getSuggestions(keyword)\r\n            if (result.length > 0) {\r\n                const suggestions = result.map(game => {\r\n                    return {\r\n                        id: game.id,\r\n                        value: game.title,\r\n                        cover: resolveURL(imgDir + game.cover),\r\n                    }\r\n                })\r\n                res.send({\r\n                    code: 200,\r\n                    suggestions,\r\n                })\r\n            }\r\n            else {\r\n                res.send({ code: 0 })\r\n            }\r\n        }, res)\r\n    }\r\n    else {\r\n        sendEmpty(res, 'keyword')\r\n        return\r\n    }\r\n})\r\n\r\nexport default roms\r\n",null,"import { red, yellow, green } from 'kolorist'\r\n\r\nconst info = function (str: string) {\r\n    console.log(green(str))\r\n}\r\n\r\nconst warn = function (str: string) {\r\n    console.log(yellow(str))\r\n}\r\n\r\nconst error = function (str: string) {\r\n    console.log(red(str))\r\n    process.exit(0)\r\n}\r\n\r\nconst nestLine = function () {\r\n    console.log()\r\n}\r\n\r\nexport {\r\n    info,\r\n    warn,\r\n    error,\r\n    nestLine,\r\n}\r\n","import type { Response } from 'express'\r\nimport * as logger from './logger'\r\nimport os from 'os'\r\n\r\nfunction sendEmpty(res: Response, target: string) {\r\n    res.send({\r\n        code: 400,\r\n        message: `${target}内容不能为空`,\r\n    })\r\n}\r\n\r\nasync function dispatchResponse(\r\n    target: Function,\r\n    res: Response,\r\n    message?: string,\r\n    err?: (args: any) => any\r\n) {\r\n    message = message ?? '发生错误'\r\n    try {\r\n        await target()\r\n    }\r\n    catch (e) {\r\n        logger.error(`${e}`)\r\n        if (err) {\r\n            err(e)\r\n        }\r\n        res.send({\r\n            code: 500,\r\n            msg: message,\r\n        })\r\n    }\r\n}\r\n\r\nfunction getIpAddress() {\r\n    const ifaces = os.networkInterfaces()\r\n    for (const dev in ifaces) {\r\n        const iface = ifaces[dev]!\r\n\r\n        for (let i = 0; i < iface.length; i++) {\r\n            const { family, address, internal } = iface[i]\r\n\r\n            if (family === 'IPv4' && address !== '127.0.0.1' && !internal) {\r\n                return address\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport { sendEmpty, dispatchResponse, getIpAddress }\r\n","import { join } from 'path'\r\nimport { getIpAddress } from './utils/response'\r\n\r\nconst dbPath = '../db/nes.sqlite3'\r\nconst romPath = '../roms'\r\nconst romDir = '/roms/'\r\nconst imgDir = '/roms/img/'\r\nconst hostIp = getIpAddress()\r\nconst getDataBasePath = () => join(__dirname, dbPath)\r\nconst getRomPath = () => join(__dirname, romPath)\r\n\r\nconst port = 8848\r\nlet baseURL = `http://localhost:${port}`\r\n\r\n// 开发模式下配置主机为局域网ip，方便调试移动端\r\nif (process.env.NODE_ENV === 'development') {\r\n    baseURL = `http://${hostIp}:${port}`\r\n}\r\n\r\nexport {\r\n    romDir,\r\n    imgDir,\r\n    getDataBasePath,\r\n    getRomPath,\r\n    port,\r\n    baseURL,\r\n    hostIp,\r\n}\r\n","import type { RomsInstance } from '../sequelize/models/roms_model'\r\nimport { baseURL, romDir, imgDir } from '../server.config'\r\n\r\nfunction checkQuery<T>(query: T): query is T & {} {\r\n    if (typeof query === 'string') {\r\n        return query.trim() !== ''\r\n    }\r\n    return query !== void 0 && query !== null\r\n}\r\n\r\nfunction resolveURL(str: string) {\r\n    return baseURL + str\r\n}\r\n\r\nfunction resolveRomData<R extends RomsInstance>(rom: R) {\r\n    return {\r\n        id: rom.id,\r\n        category: rom.Category.dataValues.type,\r\n        url: resolveURL(romDir + rom.url),\r\n        cover: resolveURL(imgDir + rom.cover),\r\n        image: resolveURL(imgDir + rom.image),\r\n        title: rom.title,\r\n        language: rom.language,\r\n        type: rom.type,\r\n        source: rom.source,\r\n        comment: rom.comment,\r\n        location: rom.location,\r\n        size: rom.size,\r\n        publisher: rom.publisher,\r\n    }\r\n}\r\n\r\nexport { checkQuery, resolveURL, resolveRomData }\r\n","import { Op, fn } from 'sequelize'\r\nimport { categorys_model } from '../sequelize/models/categorys_model'\r\nimport { roms_model } from '../sequelize/models/roms_model'\r\nimport { checkQuery, resolveRomData, resolveURL } from '../utils/query'\r\nimport { imgDir, romDir } from '../server.config'\r\n\r\nasync function getRomlist(cat: string, keyword: string, page: number, limit: number) {\r\n    const where: Record<string, any> = {}\r\n    if (checkQuery(keyword)) {\r\n        where.title = {\r\n            [Op.like]: `%${keyword}%`,\r\n        }\r\n    }\r\n    if (checkQuery(cat)) {\r\n        where.type = cat\r\n    }\r\n    const result = await roms_model.findAndCountAll({\r\n        attributes: ['id', 'title', 'cover', 'image', 'language', 'type', 'source', 'comment', 'location', 'size', 'publisher', 'url'],\r\n        include: {\r\n            model: categorys_model,\r\n            attributes: [['name', 'type']],\r\n        },\r\n        offset: (+page - 1) * +limit,\r\n        limit: +limit,\r\n        where,\r\n    })\r\n    return {\r\n        result: result.rows.map(rom => {\r\n            return resolveRomData(rom)\r\n        }),\r\n        count: result.count,\r\n    }\r\n}\r\n\r\nasync function getRomById(id: string | number) {\r\n    const romInfo = await roms_model.findByPk(id)\r\n    if (romInfo) {\r\n        romInfo.url = resolveURL(romDir + romInfo.url)\r\n        romInfo.image = resolveURL(imgDir + romInfo.image)\r\n        romInfo.cover = resolveURL(imgDir + romInfo.cover)\r\n    }\r\n    return romInfo\r\n}\r\n\r\nasync function getRandomList(n: string | number, cat: string, ignore: string) {\r\n    const where: Record<string, any> = {}\r\n    if (checkQuery(cat)) {\r\n        where.type = cat\r\n    }\r\n    if (checkQuery(ignore)) {\r\n        where.id = { [Op.ne]: ignore }\r\n    }\r\n    const result = await roms_model.findAll({\r\n        attributes: ['id', 'title', 'cover', 'image', 'language', 'type', 'source', 'comment', 'location', 'size', 'publisher', 'url'],\r\n        include: {\r\n            model: categorys_model,\r\n            attributes: [['name', 'type']],\r\n        },\r\n        order: [[fn('RANDOM'), 'ASC']],\r\n        offset: 1,\r\n        limit: +n,\r\n        where,\r\n    })\r\n    return result.map(rom => {\r\n        return resolveRomData(rom)\r\n    })\r\n}\r\n\r\nasync function getSuggestions(keyword: string) {\r\n    const result = await roms_model.findAll({\r\n        attributes: ['id', 'title', 'cover'],\r\n        where: {\r\n            title: {\r\n                [Op.like]: `%${keyword}%`,\r\n            },\r\n        },\r\n    })\r\n    return result\r\n}\r\n\r\nexport { getRomlist, getRomById, getRandomList, getSuggestions }\r\n","import { DataTypes, Model } from 'sequelize'\r\nimport sequelize from '..'\r\n\r\nclass Categorys extends Model {\r\n    declare id: number\r\n    declare name: string\r\n}\r\n\r\nconst categorys_model = Categorys.init({\r\n    id: {\r\n        type: DataTypes.TEXT,\r\n        allowNull: false,\r\n        primaryKey: true,\r\n    },\r\n    name: {\r\n        type: DataTypes.TEXT,\r\n        allowNull: false,\r\n    },\r\n}, {\r\n    sequelize,\r\n    tableName: 'categorys',\r\n    freezeTableName: true,\r\n    createdAt: false,\r\n    updatedAt: false,\r\n})\r\n\r\ncategorys_model.sync()\r\n\r\ntype CategorysInstance = InstanceType<typeof Categorys>\r\n\r\nexport { categorys_model, type CategorysInstance }\r\n","import { Sequelize } from 'sequelize'\r\nimport { getDataBasePath } from '../server.config'\r\n\r\nconst sequelize = new Sequelize({\r\n    dialect: 'sqlite',\r\n    storage: getDataBasePath(),\r\n    logging() {\r\n        return\r\n    },\r\n})\r\n\r\nexport default sequelize\r\n","import { DataTypes, Model } from 'sequelize'\r\nimport sequelize from '..'\r\nimport { categorys_model } from './categorys_model'\r\n\r\nfunction textField() {\r\n    return {\r\n        type: DataTypes.TEXT,\r\n        allowNull: false,\r\n    }\r\n}\r\n\r\nclass Roms extends Model {\r\n    declare id: number\r\n    declare title: string\r\n    declare cover: string\r\n    declare image: string\r\n    declare language: string\r\n    declare type: string\r\n    declare source: string\r\n    declare comment: string\r\n    declare location: string\r\n    declare size: string\r\n    declare publisher: string\r\n    declare url: string\r\n    // categorys表\r\n    declare Category: {\r\n        dataValues: {\r\n            type: string\r\n        }\r\n    }\r\n}\r\n\r\nconst roms_model = Roms.init({\r\n    id: {\r\n        type: DataTypes.INTEGER,\r\n        allowNull: false,\r\n        primaryKey: true,\r\n    },\r\n    title: textField(),\r\n    cover: textField(),\r\n    image: textField(),\r\n    language: textField(),\r\n    type: textField(),\r\n    source: textField(),\r\n    comment: textField(),\r\n    location: textField(),\r\n    size: textField(),\r\n    publisher: textField(),\r\n    url: textField(),\r\n},\r\n{\r\n    sequelize,\r\n    modelName: 'roms',\r\n    freezeTableName: true,\r\n    createdAt: false,\r\n    updatedAt: false,\r\n})\r\n\r\nroms_model.belongsTo(categorys_model, { foreignKey: 'type', targetKey: 'id' })\r\nroms_model.sync()\r\n\r\ntype RomsInstance = InstanceType<typeof Roms>\r\n\r\nexport { roms_model, type RomsInstance }\r\n","import { Router as router } from 'express'\r\nimport { getAllCategorys } from '../services/categorys_service'\r\nimport { dispatchResponse } from '../utils/response'\r\n\r\nconst categorys = router()\r\n\r\ncategorys.get('/categorys', async (_, res) => {\r\n    await dispatchResponse(async () => {\r\n        const reslult = await getAllCategorys()\r\n        res.send({\r\n            code: 200,\r\n            categorys: reslult,\r\n        })\r\n    }, res)\r\n})\r\n\r\nexport default categorys\r\n","import { categorys_model } from '../sequelize/models/categorys_model'\r\n\r\nasync function getAllCategorys() {\r\n    const result = await categorys_model.findAll()\r\n    return result\r\n}\r\n\r\nexport { getAllCategorys }\r\n","import { Router as rotuer } from 'express'\r\nimport { getBanner } from '../services/banner_service'\r\nimport { dispatchResponse } from '../utils/response'\r\n\r\nconst banner = rotuer()\r\n\r\nbanner.get('/banner', async (_, res) => {\r\n    await dispatchResponse(async () => {\r\n        const banner = await getBanner()\r\n        res.send({\r\n            code: 200,\r\n            banner,\r\n        })\r\n    }, res)\r\n})\r\n\r\nexport default banner\r\n","import { DataTypes, Model } from 'sequelize'\r\nimport sequelize from '..'\r\nimport { roms_model } from './roms_model'\r\n\r\nclass Banner extends Model {\r\n    declare id: number\r\n    declare title: string\r\n    // roms表\r\n    declare rom: {\r\n        image: string\r\n    }\r\n}\r\n\r\nconst banner_model = Banner.init({\r\n    id: {\r\n        type: DataTypes.INTEGER,\r\n        allowNull: false,\r\n        primaryKey: true,\r\n    },\r\n    title: {\r\n        type: DataTypes.TEXT,\r\n        allowNull: false,\r\n    },\r\n}, {\r\n    sequelize,\r\n    tableName: 'banner',\r\n    freezeTableName: true,\r\n    createdAt: false,\r\n    updatedAt: false,\r\n})\r\n\r\nbanner_model.belongsTo(roms_model, { foreignKey: 'id', targetKey: 'id' })\r\n\r\nbanner_model.sync()\r\n\r\ntype BannerInstance = InstanceType<typeof Banner>\r\n\r\nexport { banner_model, type BannerInstance }\r\n","import { roms_model } from '../sequelize/models/roms_model'\r\nimport { banner_model } from '../sequelize/models/banner_model'\r\nimport { resolveURL } from '../utils/query'\r\nimport { imgDir } from '../server.config'\r\n\r\nasync function getBanner() {\r\n    const result = await banner_model.findAll({\r\n        attributes: ['id', 'title'],\r\n        include: {\r\n            model: roms_model,\r\n            attributes: ['image'],\r\n        },\r\n    })\r\n    return result.map(({ rom, title, id }) => {\r\n        return {\r\n            id,\r\n            image: resolveURL(imgDir + rom.image),\r\n            title: title,\r\n        }\r\n    })\r\n}\r\n\r\nexport { getBanner }\r\n"],"mappings":"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","names":["import_express","os","import_sequelize","import_sequelize","import_sequelize","router","import_express","router","import_express","import_sequelize","rotuer","banner","express"]}